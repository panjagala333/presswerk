# STOP — CRITICAL READING REQUIRED

**THIS FILE MUST BE READ FIRST BY ALL AI AGENTS**

## WHAT IS THIS?

This is the AI manifest for **presswerk**. It declares:
- Canonical file locations (where things MUST be, and nowhere else)
- Critical invariants (rules that must NEVER be violated)
- Repository structure and organization

## CANONICAL LOCATIONS (UNIVERSAL RULE)

### Machine-Readable Metadata: `.machine_readable/` ONLY

These 6 SCM files MUST exist in `.machine_readable/` directory ONLY:
1. **STATE.scm** - Project state, progress, blockers
2. **META.scm** - Architecture decisions, governance
3. **ECOSYSTEM.scm** - Position in ecosystem, relationships
4. **AGENTIC.scm** - AI agent interaction patterns
5. **NEUROSYM.scm** - Neurosymbolic integration config
6. **PLAYBOOK.scm** - Operational runbook

**CRITICAL:** If ANY of these files exist in the root directory, this is an ERROR.

### Bot Directives: `.bot_directives/` ONLY

Bot-specific instructions for the gitbot-fleet (7 bots: rhodibot, echidnabot, sustainabot, glambot, seambot, finishbot, robot-repo-automaton).

### Source Code: `crates/` ONLY

All Rust source code lives in the `crates/` workspace directory. The six crates are:
- `presswerk-core` — Shared types, errors, config (no internal deps)
- `presswerk-security` — Encrypted storage, audit trail, TLS certs (depends: core)
- `presswerk-document` — PDF ops, image processing, scanning, OCR (depends: core)
- `presswerk-print` — IPP client/server, mDNS discovery, job queue (depends: core, security)
- `presswerk-bridge` — iOS (objc2) + Android (JNI) native bridges (depends: core)
- `presswerk-app` — Dioxus UI with 10 pages (depends: all above)

### Formal Verification: `src/abi/` and `ffi/zig/`

Idris2 ABI proofs in `src/abi/` (5 files):
- **Types.idr** — Core types with C ABI sizes, platform detection, injectivity proofs
- **Protocol.idr** — IPP op-code injectivity, job state machine (valid transitions, terminal states)
- **Encryption.idr** — encrypt/decrypt roundtrip, ciphertext bounds, key separation
- **Layout.idr** — Struct memory layout and alignment proofs
- **Bridge.idr** — Toll-free bridging, keychain semantics, thread safety, JNI invariants

Zig FFI in `ffi/zig/` — C-compatible exports (8 functions, 5 tests).
Generated C headers in `generated/abi/`.

## CORE INVARIANTS

1. **No SCM duplication** — Root must NOT contain STATE.scm, META.scm, etc.
2. **Single source of truth** — `.machine_readable/` is authoritative
3. **License** — All code PMPL-1.0-or-later
4. **Author** — "Jonathan D.A. Jewell (hyperpolymath) <jonathan.jewell@open.ac.uk>"
5. **No unsafe Rust** without `// SAFETY:` comment referencing ABI proofs
6. **No banned crates** — No C-based OCR (Tesseract), no openssl (use ring/rustls)
7. **No banned patterns** — No believe_me, Admitted, assert_total, unsafePerformIO, transmute
8. **Container standard** — Containerfile (not Dockerfile), Podman (not Docker), chainguard base images

## SESSION STARTUP CHECKLIST

1. Read THIS file (0-AI-MANIFEST.a2ml) first
2. Read `.machine_readable/STATE.scm` for current status (75% complete)
3. Run `cargo test -p presswerk-core -p presswerk-security -p presswerk-document -p presswerk-print` to verify state (68 tests expected)
4. Check for blockers in STATE.scm

## PROJECT STATUS

- **Version:** 0.1.0
- **Completion:** 75%
- **Stats:** 46 Rust files, 10,749 lines, 5 Idris2 ABI files, 3 Zig FFI files
- **Tests:** 68 unit tests (47 print + 14 security + 7 document), 0 failures
- **Benchmarks:** 7 criterion benchmarks (3 security + 3 print + 1 document)
- **Workflows:** 21 GitHub Actions (CI, security scan, release, benchmarks, CodeQL, Scorecard, etc.)
- **Clippy:** 0 warnings
- **Audit:** 0 vulnerabilities (14 warnings — unmaintained GTK3 transitive deps)
- **Security:** panic-attack 0 critical, 4 high (FFI — covered by Bridge.idr)
- **Container:** Containerfile (chainguard wolfi-base, multi-stage, non-root)
- **Trustfile:** 7-step verification (ABI, banned patterns, audit, encryption, PQ readiness, hash, policy)
- **Remotes:** GitHub + GitLab (hyperpolymath/presswerk)

## META

- **Format Version:** 1.1.0
- **Created:** 2026-02-13
- **Updated:** 2026-02-14
- **Maintained By:** Jonathan D.A. Jewell (hyperpolymath)
- **License:** PMPL-1.0-or-later
- **Protocol:** https://github.com/hyperpolymath/0-ai-gatekeeper-protocol
